<mat-stepper [linear]="true" #stepper>
  <mat-step [stepControl]="basicInfoForm" [editable]="!registrationSuccess">
    <form [formGroup]="basicInfoForm">
      <ng-template matStepLabel>Basic Info</ng-template>
      <mat-form-field appearance="fill">
        <mat-label>First Name</mat-label>
        <input matInput formControlName="firstName" placeholder="Enter your first name">
        <mat-error *ngIf="basicInfoForm.controls['firstName'].invalid">
          First name is required
        </mat-error>
      </mat-form-field>
      <mat-form-field appearance="fill">
        <mat-label>Last Name</mat-label>
        <input matInput formControlName="lastName" placeholder="Enter your last name">
        <mat-error *ngIf="basicInfoForm.controls['lastName'].invalid">
          Last name is required
        </mat-error>
      </mat-form-field>
      <mat-form-field appearance="fill">
        <mat-label>Phone</mat-label>
        <input matInput formControlName="phone" placeholder="Enter your phone number">
        <mat-error *ngIf="basicInfoForm.controls['phone'].invalid">
          Phone number is required
        </mat-error>
      </mat-form-field>
      <mat-form-field appearance="fill">
        <mat-label>Address</mat-label>
        <input matInput formControlName="address" placeholder="Enter your address">
      </mat-form-field>
      <mat-form-field appearance="fill">
        <mat-label>City</mat-label>
        <input matInput formControlName="city" placeholder="Enter your city">
      </mat-form-field>
      <mat-form-field appearance="fill">
        <mat-label>Zip Code</mat-label>
        <input matInput formControlName="zip" placeholder="Enter your zip code">
      </mat-form-field>
      <div>
        <button mat-raised-button matStepperNext color="accent">Next</button>
      </div>
    </form>
  </mat-step>
  <mat-step [stepControl]="credentialsForm" [editable]="!registrationSuccess">
    <form [formGroup]="credentialsForm">
      <ng-template matStepLabel>Credentials</ng-template>
      <mat-form-field appearance="fill">
        <mat-label>Email</mat-label>
        <input matInput formControlName="email" placeholder="Enter your email">
        <mat-error *ngIf="credentialsForm.controls['email'].invalid">
          Valid email is required
        </mat-error>
      </mat-form-field>
      <mat-form-field appearance="fill">
        <mat-label>Password</mat-label>
        <input matInput [type]="hide ? 'password' : 'text'" formControlName="password" placeholder="Enter your password">
        <mat-icon matSuffix (click)="hide = !hide">{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>
        <mat-error *ngIf="credentialsForm.controls['password'].invalid">
          Password is required
        </mat-error>
      </mat-form-field>
      <mat-form-field>
        <mat-label>Role</mat-label>
        <mat-select formControlName="role">
          <mat-option *ngFor="let role of roleKeys" [value]="role.toLowerCase()">
            {{ role }}
          </mat-option>
        </mat-select>
        <mat-error *ngIf="credentialsForm.controls['role'].invalid">
          Role is required
        </mat-error>
      </mat-form-field>
      <div>
        <button mat-raised-button matStepperPrevious color="accent" >Back</button>
        <button mat-raised-button (click)="handleRegister()" color="accent" >Register</button>
      </div>
    </form>
  </mat-step>
  <mat-step [aria-labelledby]="!(registrationSuccess) ? 'disabled_Resi' : ''" [editable]="false" [completed]="registrationSuccess">
    <ng-template matStepLabel>Done</ng-template>
    <p>Successfully registered user.</p>
    <div>
      <button mat-raised-button (click)="stepper.reset()" color="accent">Reset</button>
    </div>
  </mat-step>
</mat-stepper>
