<mat-toolbar class="toolbar-height" color="primary">
  <button (click)="handleDrawerToggle()" mat-stroked-button>
    <mat-icon>menu</mat-icon>
  </button>
  <span class="spacer"></span>
</mat-toolbar>
<mat-drawer-container autosize>
  <mat-drawer #drawer [class.mat-elevation-z4]="true" [opened]="drawerOpened" mode="side">
    <div class="drawer-content">
      <mat-accordion>
        <div *ngFor="let navItem of navItems">
          <div *ngIf="navItem.data && navItem.data['navInclude'] && ((this.currentRole | async) === navItem.data['role'] || (this.currentRole | async) === RolesEnum.Admin)">
            <mat-expansion-panel [class.mat-elevation-z0]="true" [hideToggle]="!hasAnyElement(navItem.children)" [class]="!hasAnyElement(navItem.children) ? 'no-body' : ''">
              <mat-expansion-panel-header [routerLink]="navItem.path" class="no-body" >
                <mat-panel-title>
                  <mat-icon>{{ navItem.data["icon"] ?? 'menu' }}</mat-icon>
                  {{ navItem.data["title"] }}
                </mat-panel-title>
              </mat-expansion-panel-header>
              <mat-nav-list *ngIf="hasAnyElement(navItem.children)">
                <div *ngFor="let child of navItem.children">
                <a [routerLink]="child.path" mat-list-item *ngIf="child.data">
                  <div class="inside-body">
                  <mat-icon>{{ navItem.data["icon"] ?? 'menu' }}</mat-icon>
                  <span matLine>{{ child.data['title'] }}</span>
                  </div>
                </a>
                </div>
              </mat-nav-list>
            </mat-expansion-panel>
        </div>
        </div>
      </mat-accordion>
      <div class="spacer"></div>
      <div class="logout-container">
        <button (click)="onLogout()" color="warn" mat-stroked-button class="logout-btn">
          <mat-icon>logout</mat-icon>
          Logout
        </button>
      </div>
    </div>
  </mat-drawer>
  <mat-drawer-content>
    <ng-content></ng-content>
  </mat-drawer-content>
</mat-drawer-container>
